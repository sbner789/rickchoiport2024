import Header from "./componets/Header";
import Main from "./pages/Main";
import Footer from "./componets/Footer";
import "./css/app.css";
import "./css/canvas.css";
import { useEffect, useRef, useState } from "react";
import useScrollSection from "./componets/hooks/useScrollSection";
import ScrollSpy from "./componets/ScrollSpy";
import Canvas from "./componets/background/Canvas";
import MobileMenuBtn from "./componets/MobileMenuBtn";
import MainTag from "./images/main_tag.png"
import SvgBlob from "./componets/background/SvgBlob";


function App() {
  const [show, setShow] = useState(false);
  const aboutRef = useRef(null);
  const skillRef = useRef(null);
  const projectRef = useRef(null);
  const contactRef = useRef(null);

  useEffect(() => {
    const showMobileMenu = () => {
      if (window.scrollY >= 744 ) {
        setShow(true)
      } else {
        setShow(false)
      }
    }
    window.addEventListener("scroll", showMobileMenu)
    return () => {
      window.removeEventListener("scroll", showMobileMenu)
    }
  }, [show])

  const { navState, scrollTo } = useScrollSection(
    aboutRef,
    skillRef,
    projectRef,
    contactRef
  )

  return (
    <div className="App">
      <ScrollSpy
        aboutRef={aboutRef}
        skillRef={skillRef}
        projectRef={projectRef}
        contactRef={contactRef}
        navState={navState}
        scrollTo={scrollTo}
      />
      { show ? 
        <MobileMenuBtn
          aboutRef={aboutRef}
          skillRef={skillRef}
          projectRef={projectRef}
          contactRef={contactRef}
          scrollTo={scrollTo}
        /> 
        : 
        null
      }
      <Header
        aboutRef={aboutRef}
        skillRef={skillRef}
        projectRef={projectRef}
        contactRef={contactRef}
        navState={navState}
        scrollTo={scrollTo}
      />
      <div style={{ position: "relative", width: "100%", overflow: "hidden" }} >
        {
          [
            {
              seq: 0,
              fill: "#c4c4c4",
              opac: "0.25",
              dur: "5000ms",
              rep: "indefinite",
              path: 
              "M24.27,5.1C14.69,10.61,7.88,19.98,3.95,30.16c-3.5,9.06-7.31,22.87,1.23,30.33,13.98,12.2,32.47-2.06,48.23,2.22,7.78,2.11,9.77,8.87,5.16,15.34-4.54,6.37-10.92,14.53-7.3,19.58s15.36-.15,15.37-.15c5.03-2.23,9.88-4,14.47-7.23,8.35-5.89,15.13-14.6,17.84-24.54,3.93-14.45-2.8-28.17-11.42-39.4-7.05-9.19-15.83-18.06-26.65-22.87-11.36-5.04-25.76-4.59-36.61,1.65Z;" + 
              "M22.5,5.38C12.93,10.89,6.96,19.78,3.02,29.96c-3.5,9.06-5.54,23.23,3,30.69,13.98,12.2,36.68-5.42,52.45-1.14,7.78,2.11,3.78,11.87-.83,18.34-4.54,6.37-10.92,14.53-7.3,19.58s15.36-.15,15.37-.15c14.54-9.86,6.98-26.96,11.57-30.19,8.35-5.89,18.04,8.36,20.74-1.58,3.93-14.45-18.45-18.84-27.07-30.07-7.05-9.19-.18-27.39-11-32.2C48.59-1.8,33.35-.87,22.5,5.38Z;" + 
              "M31.05,14.96c-9.57,5.51-24.28,2.74-28.22,12.92-3.5,9.06-5.13,22.09,3.41,29.54,13.98,12.2,36.28-4.28,52.04,0,7.78,2.11,3.78,11.87-.83,18.34-4.54,6.37-10.92,14.53-7.3,19.58s15.36-.15,15.37-.15c5.03-2.23,9.88-4,14.47-7.23,8.35-5.89,15.13-14.6,17.84-24.54,3.93-14.45-14.47-21.47-23.09-32.7-7.05-9.19-4.16-24.76-14.97-29.57-11.36-5.04-17.86,7.55-28.71,13.8Z;" + 
              "M24.27,5.1C14.69,10.61,7.88,19.98,3.95,30.16c-3.5,9.06-7.31,22.87,1.23,30.33,13.98,12.2,32.47-2.06,48.23,2.22,7.78,2.11,9.77,8.87,5.16,15.34-4.54,6.37-10.92,14.53-7.3,19.58s15.36-.15,15.37-.15c5.03-2.23,9.88-4,14.47-7.23,8.35-5.89,15.13-14.6,17.84-24.54,3.93-14.45-2.8-28.17-11.42-39.4-7.05-9.19-15.83-18.06-26.65-22.87-11.36-5.04-25.76-4.59-36.61,1.65Z;",
              blobName: "blob1"
            },
            {
              seq: 1,
              fill: "#c4c4c4",
              opac: "0.3",
              dur: "5000ms",
              rep: "indefinite",
              path: 
              "M61.21.83c-6.19-1.25-12.52-1.15-18.5.67-4.62,1.41-8.67,4.35-11.09,8.59-3.59,6.28-5.29,13.81-8.23,20.44-2.63,5.93-5.54,11.79-9.31,17.09s-8.7,9.57-11.78,15.26c-4.93,9.11-1.55,20.91,6.42,27.24,9.29,7.38,19.09,3.86,27.51-2.75,6.36-5,12.91-11.25,21.62-10.7,7.8.49,15.75,4.9,23.72,2.73,18.91-5.16,21.61-33.04,15.98-48.45-5.38-14.7-20.37-26.9-36.34-30.13Z;" +
              'M61.21.83c-6.19-1.25-12.52-1.15-18.5.67-4.62,1.41-8.67,4.35-11.09,8.59-3.59,6.28-5.29,13.81-8.23,20.44-2.63,5.93-5.54,11.79-9.31,17.09s-8.7,9.57-11.78,15.26c-4.93,9.11-1.55,20.91,6.42,27.24,9.29,7.38,19.09,3.86,27.51-2.75,6.36-5,12.44-18.88,19.84-23.5,8.63-5.39,43.14.27,43.07-9.12-.2-28.49-50.65-5.67-56.29-21.08C37.48,18.97,77.18,4.05,61.21.83Z;' +
              "M66.32,21.44C60.13,20.19,51.15-.11,42.71,0c-4.83.06-8.67,4.35-11.09,8.59-3.59,6.28-5.29,13.81-8.23,20.44-2.63,5.93-5.54,11.79-9.31,17.09s-8.7,9.57-11.78,15.26c-4.93,9.11-1.55,20.91,6.42,27.24,9.29,7.38,19.09,3.86,27.51-2.75,6.36-5,10.45-18.86,19.17-18.31,7.8.49,18.21,12.51,26.17,10.34,18.91-5.16,21.61-33.04,15.98-48.45-5.38-14.7-15.25-4.79-31.23-8.01Z;" +
              "M61.21.83c-6.19-1.25-12.52-1.15-18.5.67-4.62,1.41-8.67,4.35-11.09,8.59-3.59,6.28-5.29,13.81-8.23,20.44-2.63,5.93-5.54,11.79-9.31,17.09s-8.7,9.57-11.78,15.26c-4.93,9.11-1.55,20.91,6.42,27.24,9.29,7.38,19.09,3.86,27.51-2.75,6.36-5,12.91-11.25,21.62-10.7,7.8.49,15.75,4.9,23.72,2.73,18.91-5.16,21.61-33.04,15.98-48.45-5.38-14.7-20.37-26.9-36.34-30.13Z;",
              blobName: "blob2"
            },
            {
              seq: 2,
              fill: "#c4c4c4",
              opac: "0.2",
              dur: "5000ms",
              rep: "indefinite",
              path:
              "M68.81.27c-7.03,1.59-8.49,9.94-8.16,16.46-.07,8.94-.7,18.58-7.87,24.89-7.29,6.42-17.18,5.98-26.28,5.76-10.49-.25-25.56.21-26.47,13.96-.33,4.97,1.64,9.88,4.51,13.95,18.76,26.52,58.73,25.34,80.09,2.88,17.07-17.95,23.12-53.88,2.44-71.53C82.71,2.92,76.73-.2,70.86.01c-.73.03-1.41.12-2.05.26Z;" +
              "M68.79.26c-7.03,1.59-8.49,9.94-8.16,16.46-.07,8.94-.7,18.58-7.87,24.89-7.29,6.42-17.18,5.98-26.28,5.76-10.49-.25-25.56.21-26.47,13.96-.33,4.97,5.87,3.66,8.09,8.12,16.58,33.3,55.15,31.17,76.51,8.71,17.07-17.95,16.26-48.21-4.77-65.07C75.36,9.51,76.71-.21,70.84,0c-.73.03-1.41.12-2.05.26Z;" +
              "M68.81.26c-7.03,1.59-8.49,9.94-8.16,16.46-.07,8.94,2.78,21.21-4.39,27.53-7.29,6.42-20.67,3.35-29.76,3.13-10.49-.25-25.56.21-26.47,13.96-.33,4.97,1.64,9.88,4.51,13.95,18.76,26.52,54.09,22.97,75.45.51,17.07-17.95,19.47-35.74-1.21-53.39C74.42,18.68,76.73-.21,70.86,0c-.73.03-1.41.12-2.05.26Z;" +
              "M68.81.27c-7.03,1.59-8.49,9.94-8.16,16.46-.07,8.94-.7,18.58-7.87,24.89-7.29,6.42-17.18,5.98-26.28,5.76-10.49-.25-25.56.21-26.47,13.96-.33,4.97,1.64,9.88,4.51,13.95,18.76,26.52,58.73,25.34,80.09,2.88,17.07-17.95,23.12-53.88,2.44-71.53C82.71,2.92,76.73-.2,70.86.01c-.73.03-1.41.12-2.05.26Z;",
              blobName: "blob3"
            }
          ].map((blo) =>
            <SvgBlob
              key={blo.seq} 
              fill={blo.fill}
              opacity={blo.opac}
              dur={blo.dur}
              repeat={blo.rep}
              path={blo.path}
              blobName={blo.blobName}
            /> 
          )
        }
        <div className="mainObject">
          <Canvas
            circles={[
              { x: 327, y: 420, dy: 0.2, radius: 277, moveHeight: 700, condition: 400 },
              { x: 119, y: 660, dy: -0.1, radius: 104, moveHeight: 800, condition: 650 },
              { x: 461, y: 776, dy: -0.2, radius: 43, moveHeight: 850, condition: 700 },
            ]}
            contentWidth={620}
            contentHeight={900}
          />
        </div>
        <div className="mainImage">
          <div className="imageContainer">
            <img src={MainTag}></img>
          </div>
        </div>
        <Main
          aboutRef={aboutRef}
          skillRef={skillRef}
          projectRef={projectRef}
          contactRef={contactRef}
        />
        <Footer />
      </div>
    </div>
  );
}

export default App;
